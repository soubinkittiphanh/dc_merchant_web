(window.webpackJsonp=window.webpackJsonp||[]).push([[50,17,19,24],{554:function(t,e,r){"use strict";r.r(e);var n=r(243),o=r(138),l=r(240),c=r(74),component=Object(c.a)({},(function(){var t=this._self._c;return t(n.a,{attrs:{color:"primary",dark:""}},[t(o.c,[this._v("\n    ກະລຸນາລໍຖ້າ...\n    "),t(l.a,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)}),[],!1,null,null,null);e.default=component.exports},557:function(t,e,r){"use strict";r.r(e);var n=r(536),o=r(243),l=r(138),c=r(241),d=r(549),f={props:{message:{type:String,default:""}},methods:{toggleDialog:function(){this.$emit("closedialog")}}},m=r(74),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(o.a,[e(l.d,{staticClass:"text-h5 grey lighten-2"},[t._v(" ຂໍ້ຄວາມ ")]),t._v(" "),e(l.c,[t._v("\n    "+t._s(t.message)+"\n  ")]),t._v(" "),e(c.a),t._v(" "),e(l.a,[e(d.a),t._v(" "),e(n.a,{attrs:{color:"primary",text:""},on:{click:t.toggleDialog}},[t._v(" ຕົກລົງ ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports},568:function(t,e,r){r(571)},571:function(t,e,r){"use strict";var n=r(6),o=r(27),l=r(18),c=r(59),d=r(22),f=r(80),m=r(206),_=r(31),h=r(102),v=r(258),D=r(354),x=r(25),w=r(49),y=x("replace"),k=TypeError,O=l("".indexOf),C=l("".replace),S=l("".slice),F=Math.max,I=function(t,e,r){return r>t.length?-1:""===e?r:O(t,e,r)};n({target:"String",proto:!0},{replaceAll:function(t,e){var r,n,l,x,N,T,L,j,E,P=c(this),R=0,A=0,H="";if(!f(t)){if((r=m(t))&&(n=_(c(v(t))),!~O(n,"g")))throw k("`.replaceAll` does not allow non-global regexes");if(l=h(t,y))return o(l,t,P,e);if(w&&r)return C(_(P),t,e)}for(x=_(P),N=_(t),(T=d(e))||(e=_(e)),L=N.length,j=F(1,L),R=I(x,N,0);-1!==R;)E=T?_(e(N,R,x)):D(N,x,R,[],void 0,e),H+=S(x,A,R)+E,A=R+L,R=I(x,N,R+j);return A<x.length&&(H+=S(x,A)),H}})},586:function(t,e,r){"use strict";r(259);var n=r(261);e.a=Object(n.a)("layout")},588:function(t,e,r){"use strict";r.r(e);var n=r(536),o=r(243),l=r(138),c=r(701),d=r(549),f=(r(29),r(252),r(38)),m=(r(47),r(139),{props:{orderId:{type:String,default:""}},created:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:case"end":return e.stop()}}),e)})))()},methods:{getFormatNum:function(t){return(new Intl.NumberFormat).format(t)},toggleDialog:function(){this.$emit("close-dialog","false")},fetchData:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isloading=!0,e.next=3,t.$axios.get("api/findOrderById/?orderId="+t.orderId).then((function(e){t.orderList=e.data.row.map((function(e){return{id:e.id,order_id:e.order_id,user_id:e.user_id,product_id:e.product_id+" "+e.pro_name,product_amount:e.product_amount,product_price:t.getFormatNum(e.product_price),order_price_total:t.getFormatNum(e.order_price_total),product_discount:e.product_discount,locking_session_id:e.locking_session_id,cod_fee:e.cod_fee,rider_fee:e.rider_fee,record_status:e.record_status,cancel_reason:e.cancel_reason,txn_date:e.txn_date.split("T")[0],recordStatusText:1===e.record_status?"Effeced":2===e.record_status?"Cancel":"Return"}}))})).catch((function(e){t.message=e,console.log("Error: "+e)}));case 3:t.isloading=!1;case 4:case"end":return e.stop()}}),e)})))()}},data:function(){return{search:"",orderList:[],headers:[{text:"ວັນທີ",align:"center",value:"txn_date",sortable:!0},{text:"ລະຫັດສິນຄ້າ",align:"center",value:"product_id"},{text:"ຈຳນວນ",align:"center",value:"product_amount"},{text:"ລາຄາ",align:"end",value:"product_price",sortable:!0},{text:"ລວມ",align:"end",value:"order_price_total",sortable:!1},{text:"ສະຖານະ",align:"end",value:"recordStatusText",sortable:!1}]}}}),_=r(74),component=Object(_.a)(m,(function(){var t=this,e=t._self._c;return e("div",[e(o.a,[e(l.b,[e("span",{staticClass:"text-h5"},[t._v("Order item")])]),t._v(" "),t.orderList?e(c.a,{attrs:{headers:t.headers,search:t.search,items:t.orderList},scopedSlots:t._u([{key:"item.function",fn:function(r){var o=r.item;return[e(n.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.editItem(o),t.wallet=!0}}},[e("i",{staticClass:"fas fa-wallet"})])]}}],null,!0)}):t._e(),t._v(" "),e(l.a,[e(d.a),t._v(" "),e(n.a,{attrs:{color:"blue-darken-1",variant:"text"},on:{click:t.toggleDialog}},[t._v("\n                Close\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},589:function(t,e,r){"use strict";r.r(e);var n=r(243),o=r(138),l=r(574),c=r(241),d=r(572),f={props:{orderDetail:{type:Object,default:""}}},m=r(74),component=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e(n.a,{staticClass:"ml-4"},[e(o.d,[t._v(t._s(this.orderDetail.title))]),t._v(" "),e(d.a,[e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v("ຈຳນວນ")]),t._v(" "),e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v(t._s(this.orderDetail.amount)+" ອໍເດີ")])],1),t._v(" "),e(c.a),t._v(" "),e(d.a,[e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v("ຍອດຂາຍ")]),t._v(" "),e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v(t._s(this.orderDetail.sale))])],1),t._v(" "),e(c.a),t._v(" "),e(d.a,[e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v("ສ່ວນຫລຸດ")]),t._v(" "),e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v(t._s(this.orderDetail.discount))])],1),t._v(" "),e(c.a),t._v(" "),e(d.a,[e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v("ຍອດເຫລືອ")]),t._v(" "),e(l.a,{attrs:{cols:"6",lg:"6"}},[t._v(t._s(this.orderDetail.gross))])],1)],1)}),[],!1,null,null,null);e.default=component.exports},616:function(t,e,r){var content=r(676);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("6d9c9147",content,!0,{sourceMap:!1})},675:function(t,e,r){"use strict";r(616)},676:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,'.grey[data-v-c0e650b6],.text-h5[data-v-c0e650b6]{font-family:"Noto Sans Lao"}table[data-v-c0e650b6]{border:1px solid #000}',""]),n.locals={},t.exports=n},715:function(t,e,r){"use strict";r.r(e);var n=r(536),o=r(243),l=r(138),c=r(574),d=r(701),f=r(700),m=r(563),_=r(241),h=r(586),v=r(244),D=r(572),x=r(85),w=(r(29),r(252),r(75),r(568),r(24)),y=r(70),k=r(38),O=(r(4),r(8),r(40),r(57),r(69),r(26),r(65),r(47),r(30),r(578),r(139),{components:{OrderDetail:r(588).default},middleware:"auths",data:function(){return{whatsappContactLink:"",componentKey:0,dialogOrderDetail:!1,selectedOrderId:"",wallet:!1,isedit:!1,dialog:!1,isloading:!1,dialogForm:!1,message:"",valid:!0,name:"",search:"",userId:null,orderHeaderList:[],loadDataNoCancelOrder:[],codPaid:[],headers:[{text:"ວັນທີ",align:"center",value:"bookingDate",sortable:!0},{text:"ຊື່ລູກຄ້າ",align:"center",value:"cusName"},{text:"ເບີໂທ",align:"center",value:"cusTel"},{text:"ບ່ອນສົ່ງ",align:"center",value:"cusAddress"},{text:"ສ່ວນຫລຸດ",align:"end",value:"discount",sortable:!0},{text:"ລວມ",align:"end",value:"cartTotal",sortable:!1},{text:"ຂົນສົ່ງ",align:"end",value:"shippingCompany",sortable:!1},{text:"ການຊຳລະ",align:"end",value:"payment",sortable:!1},{text:"ຮ້ານ",align:"end",value:"shopName",sortable:!1},{text:"ລາຍລະອຽດ",align:"end",value:"function",sortable:!1}],date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),date2:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateFormatted:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),dateFormatted2:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),menu1:!1,menu2:!1}},created:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadData();case 2:case"end":return e.stop()}}),e)})))()},watch:{message:function(t){this.dialog=null!=t},isedit:function(t){t||(this.form_data.cus_id="1XXX")},date:function(t){this.dateFormatted=this.formatDate(this.date),this.loadData()},date2:function(t){this.dateFormatted2=this.formatDate(this.date2),this.loadData()}},computed:{computedDateFormatted:function(){return this.formatDate(this.date)},totalSale:function(){var t=0;return this.noCancelData.forEach((function(e){console.log("====>",e.cartTotal),t+=parseInt(e.cartTotal)})),console.log("Price total: "+t),this.getFormatNum(t)},totalSaleOriginal:function(){var t=0;return this.noCancelData.forEach((function(e){console.log("====>",e.cartTotal),t+=parseInt(e.cartTotal)})),console.log("Price total: "+t),this.getFormatNum(t)},totalDiscount:function(){var t=0;return this.noCancelData.forEach((function(e){console.log("====>",e.discount),t+=parseInt(e.discount)})),console.log("Price total: "+t),this.getFormatNum(t)},noCancelData:function(){var t=this;return this.loadDataNoCancelOrder=[],this.orderHeaderList.forEach((function(element){console.log(element.recordStatus),1===element.recordStatus&&(console.log("Concept applied"),t.loadDataNoCancelOrder.push(element))})),this.loadDataNoCancelOrder},unpaidCodOrder:function(){var t=[],e={};this.orderHeaderList.forEach((function(element){console.log(element.recordStatus),"PENDING"===element.paymentStatus&&element.payment.includes("COD")&&(console.log("Concept applied"),t.push(element))}));var r=t.reduce((function(t,e){return t+e.cartTotal}),0),n=t.reduce((function(t,e){return t+e.discount}),0);return e.amount=t.length,e.sale=this.getFormatNum(r),e.discount=this.getFormatNum(n),e.gross=this.getFormatNum(r-n),e.title="ຍອດບິນ COD",e}},methods:{whatsappLink:function(t){var e=t.cusTel.trim(),r=e.substring(e.length-8);this.whatsappContactLink="https://api.whatsapp.com/send?phone=+85620".concat(r,"&text=").concat(encodeURIComponent("ສະບາຍດີ ລູກຄ້າ "))},getFormatNum:function(t){return(new Intl.NumberFormat).format(t)},editItem:function(t){this.componentKey+=1,this.selectedOrderId=t.orderId.toString(),this.dialogOrderDetail=!this.dialogOrderDetail},handleEvent:function(){this.dialogOrderDetail=!1},loadData:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isloading=!0,e.next=3,t.$axios.get("api/dynamicCustomer/findDymCustomerByBookingDate/?fdate="+t.date+"&tdate="+t.date2).then((function(e){var r;t.orderHeaderList=[],t.orderHeaderList=e.data.allOrder.map((function(t){return{cartTotal:t.cart_total,codFee:t.cod_fee,cusAddress:t.dest_delivery_branch,discount:t.discount,id:t.id,lockingSessionId:t.locking_session_id,cusName:t.name,payment:t.payment_code,riderFee:t.rider_fee,shippingFeeBy:t.shipping_fee_by,shopName:t.outlet_name,shippingCompany:t.source_delivery_branch,cusTel:t.tel,bookingDate:t.txn_date.split("T")[0],recordStatus:t.record_status,orderId:t.order_id,paymentStatus:"PENDING"}})),t.codPaid=e.data.codPaid.map((function(t){return{cartTotal:t.cart_total,codFee:t.cod_fee,cusAddress:t.dest_delivery_branch,discount:t.discount,id:t.id,lockingSessionId:t.locking_session_id,cusName:t.name,payment:t.payment_code+" [PAID]",riderFee:t.rider_fee,shippingFeeBy:t.shipping_fee_by,shopName:t.outlet_name,shippingCompany:t.source_delivery_branch,cusTel:t.tel,bookingDate:t.txn_date.split("T")[0],recordStatus:t.record_status,orderId:t.order_id,paymentStatus:"PAID"}})),(r=t.orderHeaderList).push.apply(r,Object(y.a)(t.codPaid)),console.log(t.orderHeaderList.length)})).catch((function(e){t.message=e,console.log("Error: "+e)}));case 3:t.isloading=!1;case 4:case"end":return e.stop()}}),e)})))()},formatDate:function(t){if(!t)return null;var e=t.split("-"),r=Object(w.a)(e,3),n=r[0],o=r[1],l=r[2];return"".concat(o,"/").concat(l,"/").concat(n)},parseDate:function(t){if(!t)return null;var e=t.split("/"),r=Object(w.a)(e,3),n=r[0],o=r[1],l=r[2];return"".concat(l,"-").concat(n.padStart(2,"0"),"-").concat(o.padStart(2,"0"))}}}),C=(r(675),r(74)),component=Object(C.a)(O,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(m.a,{attrs:{"max-width":"300px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("dialog-classic-message",{attrs:{message:t.message},on:{closedialog:function(e){t.message=null}}})],1),t._v(" "),e(m.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(m.a,{attrs:{"max-width":"1024",persistent:""},model:{value:t.dialogOrderDetail,callback:function(e){t.dialogOrderDetail=e},expression:"dialogOrderDetail"}},[e("order-detail",{key:t.componentKey,attrs:{"order-id":t.selectedOrderId},on:{"close-dialog":t.handleEvent}})],1),t._v(" "),e(o.a,[e(l.d,[e(h.a,{attrs:{row:"",wrap:""}},[e(c.a,{attrs:{cols:"6"}},[e(v.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[e(x.a,t._g(t._b({attrs:{label:"ຈາກວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},"v-text-field",o,!1),n))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),e(f.a,{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),e(v.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[e(x.a,t._g(t._b({attrs:{label:"ຫາວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date2=t.parseDate(t.dateFormatted2)}},model:{value:t.dateFormatted2,callback:function(e){t.dateFormatted2=e},expression:"dateFormatted2"}},"v-text-field",o,!1),n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(f.a,{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1),t._v(" "),e(c.a,{attrs:{cols:"6"}},[e(x.a,{attrs:{"append-icon":"mdi-magnify",label:"ຊອກຫາ","single-line":"","hide-detailsx":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e(x.a,{attrs:{"append-icon":"mdi-magnify",label:"ລະຫັດຜູ້ຂາຍ","single-line":"","hide-detailsx":""},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),t._v(" "),e(n.a,{on:{click:t.loadData}},[t._v(" ດຶງລາຍງານ ")])],1)],1)],1),t._v(" "),e(_.a),t._v(" "),e(l.c,[e(h.a,{attrs:{row:"",wrap:""}},[e(D.a,[e(c.a,{attrs:{cols:"6",lg:"6"}},[e("order-sumary-card",{attrs:{orderDetail:{title:"ຍອດບິນ",amount:t.getFormatNum(t.noCancelData.length),sale:t.totalSale,discount:t.totalDiscount,gross:t.getFormatNum(t.totalSale.replaceAll(",","")-t.totalDiscount.replaceAll(",",""))}}})],1),t._v(" "),e(c.a,{attrs:{cols:"6",lg:"6"}},[e("order-sumary-card",{attrs:{orderDetail:this.unpaidCodOrder}})],1)],1)],1)],1),t._v(" "),t.orderHeaderList?e(d.a,{attrs:{headers:t.headers,search:t.search,items:t.orderHeaderList},scopedSlots:t._u([{key:"item.function",fn:function(r){var o=r.item;return[e(n.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.editItem(o),t.wallet=!0}}},[e("i",{staticClass:"fas fa-eye"})])]}},{key:"item.cusTel",fn:function(r){var o=r.item;return[e(n.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.whatsappLink(o)}}},[t._v("\n          "+t._s(o.cusTel)+"\n          "),e("a",{attrs:{href:t.whatsappContactLink,target:"_blank"}},[t._v("Whatsapp")])])]}}],null,!0)}):t._e()],1)],1)}),[],!1,null,"c0e650b6",null);e.default=component.exports;installComponents(component,{DialogClassicMessage:r(557).default,LoadingIndicator:r(554).default,OrderDetail:r(588).default,OrderSumaryCard:r(589).default})}}]);