(window.webpackJsonp=window.webpackJsonp||[]).push([[4,23],{559:function(e,t,r){"use strict";r.r(t);var n=r(246),o=r(139),l=r(243),c=r(75),component=Object(c.a)({},(function(){var e=this._self._c;return e(n.a,{attrs:{color:"primary",dark:""}},[e(o.c,[this._v("\n    ກະລຸນາລໍຖ້າ...\n    "),e(l.a,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports},569:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return c}));r(26),r(208);var n=function(e,t,r){e({icon:t,title:"ທ່ານແນ່ໃຈທີ່ຈະລົບບໍ່ ?",text:"ລາຍການນີ້ຈະຖືກລົບ ອອກຈາກຖານຂໍ້ມູນ!",confirmButtonText:"ຢືນຢັນ",confirmButtonColor:"#d33",showCancelButton:!0,cancelButtonText:"ອອກ",cancelButtonColor:"#3085d6"}).then((function(e){e.isConfirmed&&r()}))},o=function(e,title,t){e({icon:"error",title:title,text:t,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},l=function(e,title,text){e({icon:"success",title:title,text:text,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},c=function(e){return(new Intl.NumberFormat).format(e)}},578:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return l}));r(23),r(26),r(571),r(4),r(65),r(208);var n=function(e,title,t){e({icon:"error",title:title,text:t,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},o=function(e,title,text){e({icon:"success",title:title,text:text,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},l=(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);console.log("Date found => ",t);var r=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return"".concat(r,"-").concat(n,"-").concat(o)})},639:function(e,t,r){"use strict";r.r(t);var n=r(555),o=r(541),l=r(246),c=r(139),d=r(577),m=r(552),f=r(712),h=r(568),v=r(244),w=r(570),y=r(574),x=r(554),R=r(707),k=r(86),_=(r(41),r(30),r(60),r(44),r(11),r(71),r(82),r(38)),C=(r(140),r(21),r(29),r(676),r(40),r(57),r(166),r(4),r(58),r(47),r(569));r(578);function $(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var D={props:{isEdit:{type:Boolean,default:!1},campaignId:{type:Number,default:null}},data:function(){return{productList:[],showAddRowDialog:!1,dialog:!1,title:"ສ້າງ Campaign",valid:!1,isLoading:!1,form:{header:{title:"Summer Sale",start:"",end:"",product:"T-shirts",productId:1e3,budget:5e3,isActive:!0}},bookingDate:"",rules:{required:function(e){return!!e||"This field is required"},dateAfter:function(e){return function(t){return!e||(new Date(t)>=new Date(e)||"Date must be after start date")}},dateAfterToday:function(e){return new Date(e)>=new Date||"Date must be after today"},number:function(e){return!isNaN(parseFloat(e))&&isFinite(e)||"Value must be a number"}},headers:[{text:"Date",value:"date"},{text:"Reach",value:"reach"},{text:"Comments",value:"comments"},{text:"Results",value:"results"},{text:"Purchase Qty",value:"purchaseQty"},{text:"Cost Per Customer",value:"costPerCustomer"},{text:"Budget Spend",value:"budgetSpend"}],campaignEntry:[],newRow:{date:"",reach:"",comments:"",results:"",purchaseQty:"",costPerCustomer:"",budgetSpend:""}}},mounted:function(){var e=(new Date).toISOString().substr(0,10);this.form.header.start=e,this.form.header.end=e,this.newRow.date=e,this.loadCampaign(),this.loadProduct()},computed:{dateRules:function(){return[function(e){return!!e||"Field is required"},function(e){return/^(\d{4})-(\d{2})-(\d{2})$/.test(e)||"Invalid date format (YYYY-MM-DD)"}]},numberRule:function(){return[function(e){return!!e||"Field is required"},function(e){return Number.isInteger(Number(e))||"Value must be an"}]}},methods:{deleteItem:function(e){var t=this,r=this.campaignEntry.indexOf(e);r>-1&&(this.isEdit&&e.id?Object(C.a)(this.$swal,"warning",Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Delete record function"),t.isLoading=!0,n.next=4,t.$axios.delete("/api/campaignEntry/delete/".concat(e.id)).then((function(e){console.log("response=>",e.data),e.data.includes("successfully")&&t.campaignEntry.splice(r,1)})).catch((function(e){Object(C.c)(t.$swal,"ເກີດຂໍ້ຜິດພາດ",e.response.data)}));case 4:t.isLoading=!1;case 5:case"end":return n.stop()}}),n)})))):this.campaignEntry.splice(r,1))},open:function(){this.dialog=!0},close:function(){this.dialog=!1},validateObject:function(e){var t=e.date,r=e.reach,n=e.comments,o=e.results,l=e.purchaseQty,c=e.costPerCustomer,d=e.budgetSpend;return console.log("Result ===> ",o," ",Number.isInteger(Number("0"))," val ",!!o),!!(t&&r&&n&&o&&l&&c&&d)&&(!(Number.isInteger(Number(r))||Number(r)<0)&&(!(Number.isInteger(Number(n))||Number(n)<0)&&(!(Number.isInteger(Number(o))||Number(o)<0)&&(!(Number.isInteger(Number(l))||Number(l)<0)&&(!(Number.isInteger(Number(c))||Number(c)<0)&&!(Number.isInteger(Number(d))||Number(d)<0))))))},validateCampaignEntry:function(){var e,t=$(this.campaignEntry);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!this.validateObject(r))return!1}}catch(e){t.e(e)}finally{t.f()}return!0},loadCampaign:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLoading=!0,!e.isEdit){t.next=4;break}return t.next=4,e.$axios.get("/api/campaign/find/".concat(e.campaignId)).then((function(t){e.form.header=t.data,e.form.header.start=t.data.start.split("T")[0],e.form.header.end=t.data.end.split("T")[0],e.campaignEntry.length=0;var r,n=$(t.data.entries);try{for(n.s();!(r=n.n()).done;){var o=r.value,l=o;l.date=o.date.split("T")[0],e.campaignEntry.push(l)}}catch(e){n.e(e)}finally{n.f()}})).catch((function(e){console.log("Load cammpaign error",e)}));case 4:e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLoading){t.next=18;break}if(e.isLoading=!0,0!=e.campaignEntry.length){t.next=5;break}return e.isLoading=!1,t.abrupt("return",Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ","ບໍ່ມີລາຍການກະລຸນາເພີ່ມຢ່າງນ້ອຍ 1 ລາຍການ"));case 5:if(e.validateCampaignEntry()){t.next=8;break}return e.isLoading=!1,t.abrupt("return",Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ","ກະລຸນາກວດຂໍ້ມູນຄືນໃຫ້ຖືກຕ້ອງ"));case 8:if(e.form.header.entry=e.campaignEntry,!e.isEdit||!e.campaignId){t.next=15;break}return console.log("====> update campaign"),t.next=13,e.$axios.put("/api/campaign/update/".concat(e.campaignId),e.form.header).then((function(t){200==t.status?Object(C.d)(e.$swal,"Succeed","ດຳເນີນການສຳເລັດ"):Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.data)})).catch((function(t){Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.response.data)}));case 13:t.next=17;break;case 15:return t.next=17,e.$axios.post("/api/campaign/create",e.form.header).then((function(t){200==t.status?Object(C.d)(e.$swal,"Succeed","ດຳເນີນການສຳເລັດ"):Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.data)})).catch((function(t){Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.response.data.errors[0].msg)}));case 17:e.isLoading=!1;case 18:e.close();case 19:case"end":return t.stop()}}),t)})))()},addRow:function(){this.$refs.addRowForm.validate()&&(this.campaignEntry.push(this.newRow),this.newRow={date:"",reach:"",comments:"",results:"",purchaseQty:"",costPerCustomer:"",budgetSpend:""},this.showAddRowDialog=!1)},loadProduct:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$axios.get("product_mobile_f").then((function(t){e.productList=t.data.map((function(e){return e})),console.log("all data1: ",e.productList[0].img_path)})).catch((function(e){console.log("Data: "+e)}));case 3:e.isLoading=!1;case 4:case"end":return t.stop()}}),t)})))()}}},O=r(75),component=Object(O.a)(D,(function(){var e=this,t=e._self._c;return t("div",[t(h.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[t("loading-indicator")],1),e._v(" "),t(h.a,{attrs:{"max-width":"800"},model:{value:e.showAddRowDialog,callback:function(t){e.showAddRowDialog=t},expression:"showAddRowDialog"}},[t(l.a,[t(c.d,[e._v("ເພີ່ມລາຍການໃຫມ່")]),e._v(" "),t(c.c,[t(w.a,{ref:"addRowForm"},[t(k.a,{attrs:{type:"date",label:"ວັນທີ*",required:"",hint:"date"},model:{value:e.newRow.date,callback:function(t){e.$set(e.newRow,"date",t)},expression:"newRow.date"}}),e._v(" "),t(k.a,{attrs:{label:"Reach",required:"",rules:[e.rules.required,e.rules.number]},model:{value:e.newRow.reach,callback:function(t){e.$set(e.newRow,"reach",t)},expression:"newRow.reach"}}),e._v(" "),t(k.a,{attrs:{label:"Comments",required:"",rules:[e.rules.required,e.rules.number]},model:{value:e.newRow.comments,callback:function(t){e.$set(e.newRow,"comments",t)},expression:"newRow.comments"}}),e._v(" "),t(k.a,{attrs:{label:"Results",required:"",rules:[e.rules.required,e.rules.number]},model:{value:e.newRow.results,callback:function(t){e.$set(e.newRow,"results",t)},expression:"newRow.results"}}),e._v(" "),t(k.a,{attrs:{label:"Purchase Qty",rules:[e.rules.required,e.rules.number],required:""},model:{value:e.newRow.purchaseQty,callback:function(t){e.$set(e.newRow,"purchaseQty",t)},expression:"newRow.purchaseQty"}}),e._v(" "),t(k.a,{attrs:{label:"Cost Per Customer",rules:[e.rules.required,e.rules.number],required:""},model:{value:e.newRow.costPerCustomer,callback:function(t){e.$set(e.newRow,"costPerCustomer",t)},expression:"newRow.costPerCustomer"}}),e._v(" "),t(k.a,{attrs:{label:"Budget Spend",rules:[e.rules.required,e.rules.number],required:""},model:{value:e.newRow.budgetSpend,callback:function(t){e.$set(e.newRow,"budgetSpend",t)},expression:"newRow.budgetSpend"}})],1)],1),e._v(" "),t(c.a,[t(o.a,{attrs:{color:"primary"},on:{click:e.addRow}},[e._v("ເພີ່ມ")]),e._v(" "),t(o.a,{attrs:{color:"secondary"},on:{click:function(t){e.showAddRowDialog=!1}}},[e._v("ປິດ")])],1)],1)],1),e._v(" "),t(l.a,[t(c.d,[t("span",{staticClass:"headline"},[e._v(e._s(e.title))])]),e._v(" "),t(c.c,[t(m.a,[t(y.a,[t(d.a,{attrs:{cols:"12",sm:"4",md:"4"}},[t(w.a,{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(k.a,{attrs:{label:"Title",rules:[e.rules.required],required:""},model:{value:e.form.header.title,callback:function(t){e.$set(e.form.header,"title",t)},expression:"form.header.title"}}),e._v(" "),t(k.a,{attrs:{label:"Remark",rules:[e.rules.required],required:""},model:{value:e.form.header.product,callback:function(t){e.$set(e.form.header,"product",t)},expression:"form.header.product"}}),e._v(" "),t(n.a,{attrs:{"item-text":"pro_name","item-value":"pro_id",items:e.productList,label:"ເລືອກສິນຄ້າ *"},model:{value:e.form.header.productId,callback:function(t){e.$set(e.form.header,"productId",t)},expression:"form.header.productId"}})],1)],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"4",md:"4"}},[t(w.a,{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(k.a,{attrs:{type:"date",label:"ວັນທີເລີ່ມ*",hint:"example of helper text only on focus"},model:{value:e.form.header.start,callback:function(t){e.$set(e.form.header,"start",t)},expression:"form.header.start"}}),e._v(" "),t(k.a,{attrs:{label:"Budget",type:"number",rules:[e.rules.required,e.rules.number],required:""},model:{value:e.form.header.budget,callback:function(t){e.$set(e.form.header,"budget",t)},expression:"form.header.budget"}})],1)],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"4",md:"4"}},[t(w.a,{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t(k.a,{attrs:{type:"date",label:"ວັນທີສິ້ນສຸດ*",hint:"example of helper text only on focus"},model:{value:e.form.header.end,callback:function(t){e.$set(e.form.header,"end",t)},expression:"form.header.end"}}),e._v(" "),t(R.a,{attrs:{label:"Active","true-value":!0,"false-value":!1},model:{value:e.form.header.isActive,callback:function(t){e.$set(e.form.header,"isActive",t)},expression:"form.header.isActive"}})],1)],1)],1),e._v(" "),t(v.a),e._v(" "),t(o.a,{attrs:{color:"primary"},on:{click:function(t){e.showAddRowDialog=!0}}},[e._v("ເພີ່ມລາຍການ")]),e._v(" "),t(f.a,{attrs:{headers:e.headers,items:e.campaignEntry},scopedSlots:e._u([{key:"item",fn:function(r){var n=r.item;return[t("tr",[t("td",[t(k.a,{attrs:{type:"date",label:"ວັນທີ*",hint:"example of helper text only on focus"},model:{value:n.date,callback:function(t){e.$set(n,"date",t)},expression:"item.date"}})],1),e._v(" "),t("td",[t(k.a,{attrs:{label:"Reach",rules:e.numberRule},model:{value:n.reach,callback:function(t){e.$set(n,"reach",t)},expression:"item.reach"}})],1),e._v(" "),t("td",[t(k.a,{attrs:{label:"Comments",rules:e.numberRule},model:{value:n.comments,callback:function(t){e.$set(n,"comments",t)},expression:"item.comments"}})],1),e._v(" "),t("td",[t(k.a,{attrs:{label:"Results",rules:e.numberRule},model:{value:n.results,callback:function(t){e.$set(n,"results",t)},expression:"item.results"}})],1),e._v(" "),t("td",[t(k.a,{attrs:{label:"Purchase Quantity",rules:e.numberRule},model:{value:n.purchaseQty,callback:function(t){e.$set(n,"purchaseQty",t)},expression:"item.purchaseQty"}})],1),e._v(" "),t("td",[t(k.a,{attrs:{label:"Cost Per Customer",rules:e.numberRule},model:{value:n.costPerCustomer,callback:function(t){e.$set(n,"costPerCustomer",t)},expression:"item.costPerCustomer"}})],1),e._v(" "),t("td",[t(k.a,{attrs:{label:"Budget Spend",rules:e.numberRule},model:{value:n.budgetSpend,callback:function(t){e.$set(n,"budgetSpend",t)},expression:"item.budgetSpend"}})],1),e._v(" "),t("td",[t(o.a,{attrs:{color:"blue-darken-1",variant:"text"},on:{click:function(t){return e.deleteItem(n)}}},[e._v("\n                                    ລົບ\n                                ")])],1)])]}}])})],1),e._v(" "),t("small",[e._v("* ສະແດງເຖິງຟິວທີ່ຕ້ອງໃສ່ຂໍ້ມູນ")])],1),e._v(" "),t(c.a,[t(x.a),e._v(" "),t(o.a,{attrs:{color:"blue-darken-1",variant:"text"},on:{click:function(t){return e.$emit("close-dialog")}}},[e._v("\n                Close\n            ")]),e._v(" "),t(o.a,{attrs:{color:"blue-darken-1",variant:"text"},on:{click:e.submit}},[e._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingIndicator:r(559).default})}}]);